# æœåŠ¡é¡¹ç›®åŠ¨æ€ç®¡ç†åŠŸèƒ½ - éƒ¨ç½²å’Œä½¿ç”¨æŒ‡å—

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

å·²æˆåŠŸå°†æœåŠ¡é¡µé¢ä¸­çš„æœåŠ¡é¡¹ç›®ï¼ˆå¦‚"æ—¥å¸¸å®¶åŠ¡æ¸…æ´"ç­‰ï¼‰ä»ç¡¬ç¼–ç æ”¹ä¸ºå¯åœ¨ Supabase åå°åŠ¨æ€ç®¡ç†ã€‚

### æ”¹é€ èŒƒå›´
- âœ… ä¿å§†æœåŠ¡é¡µé¢ (baomu.js)
- âœ… è‚²å„¿å«‚æœåŠ¡é¡µé¢ (yuerso.js)
- âœ… è€å¹´æŠ¤ç†æœåŠ¡é¡µé¢ (laorenghuli.js)
- âœ… åŒ»é™¢æŠ¤å·¥æœåŠ¡é¡µé¢ (yiyuanhugong.js)

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šåœ¨ Supabase åˆ›å»ºæ•°æ®åº“è¡¨

1. **ç™»å½• Supabase åå°**
   - è®¿é—®: https://supabase.com
   - ç™»å½•æ‚¨çš„è´¦å·
   - é€‰æ‹©é¡¹ç›®: tlxczsxuubwoeigyhmou

2. **æ‰§è¡Œ SQL è„šæœ¬**
   - ç‚¹å‡»å·¦ä¾§èœå• `SQL Editor`
   - ç‚¹å‡» `New Query`
   - å¤åˆ¶ç²˜è´´æ–‡ä»¶å†…å®¹: `supabase-migration-service-items.sql`
   - ç‚¹å‡» `Run` æ‰§è¡Œ

3. **éªŒè¯è¡¨åˆ›å»ºæˆåŠŸ**
   - ç‚¹å‡»å·¦ä¾§èœå• `Table Editor`
   - åº”è¯¥çœ‹åˆ°æ–°è¡¨: `service_items`
   - è¡¨ä¸­å·²è‡ªåŠ¨æ’å…¥ 24 æ¡æ•°æ®ï¼ˆæ¯ä¸ªæœåŠ¡6æ¡ï¼‰

### ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²ä»£ç åˆ°ç”Ÿäº§ç¯å¢ƒ

#### æ–¹å¼Aï¼šé€šè¿‡ Netlifyï¼ˆæ¨èï¼‰

1. **æäº¤ä»£ç åˆ° Git**
   ```bash
   cd "C:\Users\Administrator\Desktop\58\gangwan-jiazhen"
   git add .
   git commit -m "æ·»åŠ æœåŠ¡é¡¹ç›®åŠ¨æ€ç®¡ç†åŠŸèƒ½"
   git push
   ```

2. **Netlify è‡ªåŠ¨éƒ¨ç½²**
   - Netlify ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ä»£ç æ›´æ–°
   - ç­‰å¾…çº¦ 2-3 åˆ†é’Ÿè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
   - è®¿é—® https://gwjz.netlify.app éªŒè¯

#### æ–¹å¼Bï¼šæ‰‹åŠ¨æ„å»ºæµ‹è¯•

```bash
cd "C:\Users\Administrator\Desktop\58\gangwan-jiazhen"

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install

# æœ¬åœ°å¼€å‘æµ‹è¯•
npm run dev
# è®¿é—® http://localhost:3000

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

---

## ğŸ“ å¦‚ä½•ç®¡ç†æœåŠ¡é¡¹ç›®

### åœ¨ Supabase åå°æ·»åŠ æ–°æœåŠ¡é¡¹ç›®

1. **æ‰“å¼€ Supabase åå°**
   - ç‚¹å‡» `Table Editor`
   - é€‰æ‹© `service_items` è¡¨
   - ç‚¹å‡» `Insert row`

2. **å¡«å†™å­—æ®µ**
   | å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
   |------|------|------|
   | service_type | æœåŠ¡ç±»å‹ | `baomu` / `yuerso` / `laorenghuli` / `yiyuanhugong` |
   | name | æœåŠ¡é¡¹ç›®åç§° | `æ—¥å¸¸å®¶åŠ¡æ¸…æ´` |
   | image_url | å›¾ç‰‡è·¯å¾„ | `/images/service-cleaning.jpg` |
   | image_alt | SEOæè¿°æ–‡æœ¬ | `ç§¦çš‡å²›ä¿å§†æ—¥å¸¸å®¶åŠ¡æ¸…æ´æœåŠ¡` |
   | display_order | æ˜¾ç¤ºé¡ºåºï¼ˆæ•°å­—ï¼‰ | `1`, `2`, `3` ... |
   | is_active | æ˜¯å¦å¯ç”¨æ˜¾ç¤º | `true` / `false` |

3. **ç‚¹å‡» Save**

### ä¿®æ”¹ç°æœ‰æœåŠ¡é¡¹ç›®

1. åœ¨ `service_items` è¡¨ä¸­æ‰¾åˆ°è¦ä¿®æ”¹çš„è¡Œ
2. ç‚¹å‡»è¯¥è¡Œå¯ç›´æ¥ç¼–è¾‘
3. ä¿®æ”¹å®Œæˆåç‚¹å‡»ä¿å­˜

### åˆ é™¤æœåŠ¡é¡¹ç›®

**æ–¹å¼1**: è½¯åˆ é™¤ï¼ˆæ¨èï¼‰
- å°† `is_active` å­—æ®µæ”¹ä¸º `false`
- æœåŠ¡é¡¹ç›®ä¼šéšè—ä½†æ•°æ®ä¿ç•™

**æ–¹å¼2**: ç¡¬åˆ é™¤
- ç‚¹å‡»è¡Œå·¦ä¾§çš„åˆ é™¤æŒ‰é’®
- æ•°æ®ä¼šæ°¸ä¹…åˆ é™¤

### ä¿®æ”¹æ˜¾ç¤ºé¡ºåº

- ä¿®æ”¹ `display_order` å­—æ®µçš„æ•°å­—
- æ•°å­—è¶Šå°è¶Šé å‰æ˜¾ç¤º
- å»ºè®®ä½¿ç”¨: 1, 2, 3, 4, 5, 6 ...

---

## ğŸ–¼ï¸ å¦‚ä½•æ·»åŠ å›¾ç‰‡

### é€‰é¡¹1: ä½¿ç”¨æœ¬åœ°å›¾ç‰‡ï¼ˆç®€å•ï¼‰

1. **ä¸Šä¼ å›¾ç‰‡åˆ°é¡¹ç›®**
   - å°†å›¾ç‰‡æ–‡ä»¶æ”¾åˆ°: `public/images/` ç›®å½•
   - ä¾‹å¦‚: `public/images/service-new.jpg`

2. **åœ¨ Supabase ä¸­é…ç½®è·¯å¾„**
   - `image_url` å¡«å†™: `/images/service-new.jpg`

### é€‰é¡¹2: ä½¿ç”¨ Supabase Storageï¼ˆæ¨èï¼‰

1. **ä¸Šä¼ åˆ° Supabase Storage**
   - æ‰“å¼€ Supabase åå°
   - ç‚¹å‡» `Storage`
   - é€‰æ‹©æˆ–åˆ›å»º bucketï¼ˆå¦‚ `images`ï¼‰
   - ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶

2. **è·å–å›¾ç‰‡ URL**
   - ä¸Šä¼ æˆåŠŸåï¼Œç‚¹å‡»å›¾ç‰‡
   - å¤åˆ¶ `Public URL`
   - ä¾‹å¦‚: `https://tlxczsxuubwoeigyhmou.supabase.co/storage/v1/object/public/images/service-new.jpg`

3. **åœ¨ service_items è¡¨ä¸­ä½¿ç”¨**
   - `image_url` å¡«å†™å®Œæ•´ URL

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### æ•°æ®æµç¨‹

```
Supabase æ•°æ®åº“
  â†“
getStaticProps (æ„å»ºæ—¶è·å–)
  â†“
é¡µé¢ç»„ä»¶ (props)
  â†“
ç”¨æˆ·æµè§ˆå™¨ (é™æ€ HTML)
```

### ISR (å¢é‡é™æ€å†ç”Ÿ)

- é¡µé¢ä½¿ç”¨ ISR æŠ€æœ¯ï¼Œæ¯ 5 åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°
- ä¿®æ”¹æ•°æ®åï¼Œæœ€å¤šç­‰å¾… 5 åˆ†é’Ÿé¡µé¢ä¼šè‡ªåŠ¨æ›´æ–°
- å¦‚éœ€ç«‹å³ç”Ÿæ•ˆï¼Œå¯ä»¥åœ¨ Netlify æ‰‹åŠ¨è§¦å‘é‡æ–°éƒ¨ç½²

### å›é€€æœºåˆ¶

- å¦‚æœ Supabase æŸ¥è¯¢å¤±è´¥ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ `utils/seoData.js` ä¸­çš„é…ç½®
- ä¿è¯ç½‘ç«™å§‹ç»ˆå¯ç”¨

---

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„

### service_items è¡¨

```sql
CREATE TABLE service_items (
  id UUID PRIMARY KEY,
  service_type VARCHAR(50),      -- æœåŠ¡ç±»å‹
  name VARCHAR(100),              -- æœåŠ¡é¡¹ç›®åç§°
  image_url TEXT,                 -- å›¾ç‰‡URL
  image_alt TEXT,                 -- å›¾ç‰‡altæ–‡æœ¬
  display_order INTEGER,          -- æ˜¾ç¤ºé¡ºåº
  is_active BOOLEAN,              -- æ˜¯å¦å¯ç”¨
  created_at TIMESTAMP,           -- åˆ›å»ºæ—¶é—´
  updated_at TIMESTAMP            -- æ›´æ–°æ—¶é—´
);
```

### çº¦æŸæ¡ä»¶

- `service_type` åªèƒ½æ˜¯: `baomu`, `yuerso`, `laorenghuli`, `yiyuanhugong`
- `display_order` ç”¨äºæ’åºï¼Œæ•°å­—è¶Šå°è¶Šé å‰
- `is_active` ä¸º `false` æ—¶ä¸æ˜¾ç¤º

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¿®æ”¹äº†æ•°æ®ä½†é¡µé¢æ²¡æ›´æ–°ï¼Ÿ

**A**: ç­‰å¾… 5 åˆ†é’Ÿåé¡µé¢ä¼šè‡ªåŠ¨æ›´æ–°ã€‚å¦‚éœ€ç«‹å³ç”Ÿæ•ˆï¼š
1. è®¿é—® Netlify åå°
2. ç‚¹å‡» `Deploys`
3. ç‚¹å‡» `Trigger deploy` â†’ `Clear cache and deploy site`

### Q2: å›¾ç‰‡æ— æ³•æ˜¾ç¤ºï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®
2. å¦‚æœä½¿ç”¨ Supabase Storageï¼ŒURL æ˜¯å¦å®Œæ•´
3. å›¾ç‰‡æ˜¯å¦å·²ä¸Šä¼ åˆ°å¯¹åº”ä½ç½®
4. æ£€æŸ¥ `next.config.js` ä¸­çš„åŸŸåç™½åå•é…ç½®

### Q3: å¯ä»¥æ·»åŠ è¶…è¿‡ 6 ä¸ªæœåŠ¡é¡¹ç›®å—ï¼Ÿ

**A**: å¯ä»¥ï¼æ²¡æœ‰æ•°é‡é™åˆ¶ã€‚åªéœ€åœ¨ Supabase ä¸­æ·»åŠ æ›´å¤šè¡Œå³å¯ã€‚

### Q4: å¦‚ä½•æ¢å¤åˆ°æ—§çš„ç¡¬ç¼–ç æ–¹å¼ï¼Ÿ

**A**:
1. åœ¨ç»„ä»¶ä¸­åˆ é™¤ `serviceItems` prop
2. åˆ é™¤ `getStaticProps` å‡½æ•°
3. æ¢å¤ä½¿ç”¨ `SERVICE_CONTENT.{serviceName}` ç›´æ¥è¯»å–é…ç½®

### Q5: åˆ é™¤äº† Supabase è¡¨ä¼šæ€æ ·ï¼Ÿ

**A**: ä¸ç”¨æ‹…å¿ƒï¼ä»£ç æœ‰å›é€€æœºåˆ¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ `utils/seoData.js` ä¸­çš„é…ç½®ï¼Œç½‘ç«™ä¸ä¼šå´©æºƒã€‚

---

## ğŸ”„ æ›´æ–°æµç¨‹ç¤ºä¾‹

### ç¤ºä¾‹1: æ·»åŠ æ–°çš„ä¿å§†æœåŠ¡é¡¹ç›®

1. å‡†å¤‡å›¾ç‰‡: `service-pet-care.jpg`
2. ä¸Šä¼ åˆ° `public/images/`
3. ç™»å½• Supabase â†’ Table Editor â†’ service_items
4. Insert row:
   ```
   service_type: baomu
   name: å® ç‰©ç…§çœ‹
   image_url: /images/service-pet-care.jpg
   image_alt: ç§¦çš‡å²›ä¿å§†å® ç‰©ç…§çœ‹æœåŠ¡
   display_order: 7
   is_active: true
   ```
5. ä¿å­˜ï¼Œç­‰å¾… 5 åˆ†é’Ÿæˆ–æ‰‹åŠ¨è§¦å‘éƒ¨ç½²

### ç¤ºä¾‹2: ä¸´æ—¶éšè—æŸä¸ªæœåŠ¡é¡¹ç›®

1. Supabase â†’ service_items è¡¨
2. æ‰¾åˆ°è¦éšè—çš„æœåŠ¡é¡¹ç›®
3. å°† `is_active` æ”¹ä¸º `false`
4. ä¿å­˜

### ç¤ºä¾‹3: ä¿®æ”¹æœåŠ¡é¡¹ç›®å›¾ç‰‡

1. ä¸Šä¼ æ–°å›¾ç‰‡åˆ° `public/images/` æˆ– Supabase Storage
2. Supabase â†’ service_items è¡¨
3. æ‰¾åˆ°å¯¹åº”è¡Œï¼Œä¿®æ”¹ `image_url` å­—æ®µ
4. ä¿å­˜

---

## ğŸ“ æ”¯æŒè”ç³»

å¦‚æœåœ¨éƒ¨ç½²æˆ–ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹ Netlify æ„å»ºæ—¥å¿—
2. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. æ£€æŸ¥ Supabase æ—¥å¿—

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

- **SQL è„šæœ¬**: `supabase-migration-service-items.sql`
- **é¡µé¢æ–‡ä»¶**:
  - `pages/baomu.js`
  - `pages/yuerso.js`
  - `pages/laorenghuli.js`
  - `pages/yiyuanhugong.js`
- **é…ç½®æ–‡ä»¶**: `utils/seoData.js` (ä½œä¸ºå›é€€)
- **æ•°æ®åº“å®¢æˆ·ç«¯**: `lib/supabaseClient.js`

---

**æœ€åæ›´æ–°**: 2025-10-29
**ç‰ˆæœ¬**: 1.0
