# 案例展示功能使用指南

> 更新时间：2025-11-07
> 功能：展示微信聊天截图案例，动态管理，轮播展示

---

## 📋 功能概述

将原来硬编码的客户评价改为可动态管理的**案例展示**，支持：
- ✅ 展示微信聊天截图
- ✅ 自定义标题格式（秦皇岛-XX小区-找保姆-XX女士/先生）
- ✅ 添加案例说明文字
- ✅ 轮播自动滑动效果
- ✅ Supabase后台动态管理

---

## 🗄️ 数据库配置

### 第一步：创建数据表

1. **登录Supabase**
   - 访问：https://supabase.com
   - 选择项目：`tlxczsxuubwoeigyhmou`

2. **执行SQL脚本**
   - 点击左侧 `SQL Editor`
   - 点击 `New Query`
   - 复制粘贴文件内容：`supabase-migration-case-studies.sql`
   - 点击 `Run` 执行

3. **验证表创建**
   - 点击左侧 `Table Editor`
   - 应该看到新表：`case_studies`
   - 已自动创建3条示例数据

---

## 📊 数据表字段说明

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| **id** | UUID | 主键（自动生成） | - |
| **title** | VARCHAR(200) | 案例标题 | 秦皇岛-海港区-找保姆-刘女士 |
| **screenshots** | JSONB | **截图数组（支持多张）** | `[{"url": "...", "alt": "..."}]` |
| **description** | TEXT | 案例说明 | 这个案例是成单时间最短的单... |
| **service_type** | VARCHAR(50) | 服务类型 | 保姆/育儿嫂/老年护理/医院护工 |
| **location** | VARCHAR(100) | 地区 | 海港区/山海关区/北戴河区等 |
| **display_order** | INTEGER | 显示顺序 | 1, 2, 3... (数字越小越靠前) |
| **is_active** | BOOLEAN | 是否启用 | true/false |
| **is_featured** | BOOLEAN | 是否推荐 | true/false |
| **created_at** | TIMESTAMP | 创建时间 | 自动生成 |
| **updated_at** | TIMESTAMP | 更新时间 | 自动更新 |

**重要说明**：
- `screenshots` 字段支持**多张图片**，采用JSONB数组格式
- 每个案例可以上传多张聊天截图，系统会自动轮播
- 图片数组格式：`[{"url": "图片地址", "alt": "SEO描述"}, ...]`

---

## 📸 如何上传截图（支持多张）

### 方式1：使用本地图片（简单快速）

1. **准备图片**
   - 使用"微信聊天截图生成器"工具生成截图
   - 文件位置：`图片生成-完整版.html`
   - 生成的图片格式：PNG
   - **一个案例可以生成多张截图**（例如聊天记录很长）

2. **上传到项目**
   - 将截图文件放到：`public/images/cases/` 目录
   - 建议命名：
     - 案例1的多张图片：`case-1-1.png`, `case-1-2.png`, `case-1-3.png`
     - 案例2的多张图片：`case-2-1.png`, `case-2-2.png`

3. **在数据库中引用（JSONB数组格式）**
   - 单张图片：
   ```json
   [{"url": "/images/cases/case-1-1.png", "alt": "秦皇岛海港区找保姆案例-截图1"}]
   ```
   - 多张图片：
   ```json
   [
     {"url": "/images/cases/case-1-1.png", "alt": "秦皇岛海港区找保姆案例-截图1"},
     {"url": "/images/cases/case-1-2.png", "alt": "秦皇岛海港区找保姆案例-截图2"},
     {"url": "/images/cases/case-1-3.png", "alt": "秦皇岛海港区找保姆案例-截图3"}
   ]
   ```

### 方式2：使用Supabase Storage（推荐）

1. **创建Storage Bucket**
   - 打开Supabase后台
   - 点击 `Storage`
   - 创建新bucket：`case-screenshots`
   - 设置为Public

2. **上传截图**
   - 在`case-screenshots` bucket中上传多张截图
   - 点击图片，复制每张图片的`Public URL`
   - 例如：
     - `https://xxx.supabase.co/storage/v1/object/public/case-screenshots/case-1-1.png`
     - `https://xxx.supabase.co/storage/v1/object/public/case-screenshots/case-1-2.png`

3. **在数据库中引用（填入完整URL数组）**
   ```json
   [
     {"url": "https://xxx.supabase.co/.../case-1-1.png", "alt": "案例截图1"},
     {"url": "https://xxx.supabase.co/.../case-1-2.png", "alt": "案例截图2"}
   ]
   ```

---

## ✍️ 添加案例示例

### 示例1：添加保姆案例（单张截图）

打开Supabase → Table Editor → case_studies → Insert row

```
title: 秦皇岛-海港区世纪港湾小区-找保姆-李女士
screenshots: [{"url": "/images/cases/baomu-case-1.png", "alt": "秦皇岛海港区世纪港湾小区找保姆成功案例-李女士"}]
description: 这个案例是成单时间最短的单，多亏了客户的信任。李女士通过微信咨询后，当天下午就安排了3位阿姨面试，第二天就签约上岗了。现在阿姨已经工作3个月，客户非常满意。
service_type: 保姆
location: 海港区
display_order: 1
is_active: true
is_featured: true
```

### 示例2：添加育儿嫂案例（多张截图）

```
title: 秦皇岛-北戴河区-找育儿嫂-张女士
screenshots: [
  {"url": "/images/cases/yuerso-case-1-1.png", "alt": "秦皇岛北戴河区找育儿嫂成功案例-张女士-初次咨询"},
  {"url": "/images/cases/yuerso-case-1-2.png", "alt": "秦皇岛北戴河区找育儿嫂成功案例-张女士-推荐阿姨"},
  {"url": "/images/cases/yuerso-case-1-3.png", "alt": "秦皇岛北戴河区找育儿嫂成功案例-张女士-签约成功"}
]
description: 张女士是二胎妈妈，对育儿嫂要求很高。我们根据她的需求推荐了3位有5年以上经验的阿姨，最终张女士选择了王阿姨。现在宝宝已经6个月了，护理得很好，张女士全家都很满意。
service_type: 育儿嫂
location: 北戴河区
display_order: 2
is_active: true
is_featured: true
```

**注意**：
- `screenshots` 字段必须是**合法的JSON数组格式**
- 在Supabase Table Editor中，直接粘贴JSON格式即可
- 图片URL可以是相对路径（/images/...）或绝对路径（https://...）
- 每张图片都应该有独立的 `alt` 描述（有利于SEO）

---

## 🎯 使用技巧

### 1. 标题格式建议

✅ **推荐格式**：
- `秦皇岛-海港区-找保姆-李女士`
- `秦皇岛-北戴河区鸽子窝小区-找育儿嫂-王女士`
- `秦皇岛-山海关区-找老年护理-赵先生`

❌ **不推荐**：
- 太长：`秦皇岛市海港区世纪港湾小区3号楼找保姆...`
- 太短：`找保姆`
- 无地域：`李女士找保姆`

### 2. 说明文字建议

**要素**：
- 案例亮点（成单快、服务好、价格合理等）
- 服务过程（咨询→匹配→签约→服务）
- 客户反馈（满意度、推荐度）

**示例**：
```
这个案例是成单时间最短的单，多亏了客户的信任。从微信咨询到签约只用了2小时。
客户王先生的母亲需要专业护理，我们根据老人的身体状况推荐了有5年经验的李阿姨。
现在服务已经3个月了，老人恢复得很好，家属非常满意，还给我们介绍了2位新客户。
```

### 3. 截图生成技巧

使用 `图片生成-完整版.html` 工具时：

**建议流程**：
1. 设置聊天对象名称
2. 上传双方头像
3. 按对话顺序添加消息：
   - 时间戳（开始咨询时间）
   - 客户询问（文本消息）
   - 你的回复（文本消息）
   - 推荐服务（文本+图片）
   - 价格说明（文本消息）
   - 转账记录（转账消息）
   - 感谢回复（文本消息）
4. 实时预览效果
5. 生成并下载截图

**截图建议**：
- 控制消息数量：6-10条最佳
- 突出关键信息：价格、服务内容、转账
- 真实自然：模拟真实对话场景

---

## 🔄 管理操作

### 修改案例

1. Supabase → Table Editor → case_studies
2. 找到要修改的案例行
3. 点击单元格直接编辑
4. 编辑完成后，`updated_at` 会自动更新

### 禁用案例（软删除）

1. 找到案例行
2. 将 `is_active` 改为 `false`
3. 案例会从网站隐藏，但数据保留

### 删除案例（硬删除）

1. 找到案例行
2. 点击行左侧的删除按钮
3. 确认删除（数据不可恢复）

### 调整显示顺序

1. 修改 `display_order` 字段
2. 数字越小越靠前显示
3. 建议使用：1, 2, 3, 4...

### 设置推荐案例

1. 将 `is_featured` 改为 `true`
2. 推荐案例可用于未来的特殊展示

---

## 🎨 前端展示效果

### 显示位置

- 首页：客户评价板块（原位置）
- **双层轮播机制**：
  - **外层轮播（案例切换）**：每8秒自动切换到下一个案例
  - **内层轮播（图片切换）**：每4秒自动切换案例内的下一张截图
- 手动控制：
  - 外层箭头：切换不同案例（同时重置图片索引）
  - 内层箭头：切换当前案例的不同截图
- 轮播指示点：
  - 底部大点：指示当前案例位置
  - 截图下方小点：指示当前图片位置（仅多图时显示）

### 展示内容

**结构**：
```
┌─────────────────────────────────────┐
│ 标题 + 服务类型徽章                     │
├─────────────────────────────────────┤
│                                     │
│      [◀] 微信聊天截图 [▶]            │
│         (375x667)                   │
│         ● ● ○ (图片指示点)           │
│                                     │
├─────────────────────────────────────┤
│ 案例说明文字（带左侧色条）                │
├─────────────────────────────────────┤
│ 地区标签    ✓ 真实案例                 │
└─────────────────────────────────────┘
       ● ● ○ (案例指示点)
```

### 响应式设计

- 桌面端：最大宽度500px，居中显示
- 平板：自适应宽度
- 手机：全宽显示，缩小间距

---

## 🧪 测试验证

### 1. 本地测试

```bash
cd C:\Users\Administrator\Desktop\58\gangwan-jiazhen

# 启动开发服务器
npm run dev

# 访问 http://localhost:3000
# 查看首页案例展示板块
```

### 2. 检查项目

- [ ] 案例是否正常加载
- [ ] 截图是否正确显示
- [ ] 轮播是否自动切换
- [ ] 左右箭头是否可用
- [ ] 说明文字是否显示
- [ ] 移动端是否正常

### 3. 数据验证

```sql
-- 查询所有启用的案例
SELECT title, service_type, location, display_order
FROM case_studies
WHERE is_active = true
ORDER BY display_order ASC;

-- 统计案例数量
SELECT service_type, COUNT(*) as count
FROM case_studies
WHERE is_active = true
GROUP BY service_type;
```

---

## 📝 注意事项

1. **截图尺寸**
   - 推荐：375x667 (iPhone标准尺寸)
   - 格式：PNG（支持透明背景）
   - 大小：建议不超过500KB

2. **SEO优化**
   - `screenshot_alt` 必填，包含关键词
   - `title` 包含地域和服务类型
   - `description` 自然包含关键词

3. **隐私保护**
   - 客户姓名使用"X女士/先生"
   - 不显示完整电话号码
   - 不暴露详细地址

4. **内容真实**
   - 使用真实对话场景
   - 价格信息真实
   - 不夸大服务效果

---

## 🚀 部署上线

### 1. 提交代码

```bash
git add .
git commit -m "添加案例展示功能-支持微信聊天截图动态管理"
git push
```

### 2. Netlify自动部署

- Netlify会自动检测更新
- 等待2-3分钟构建完成
- 访问 https://qhdgwjz.cn 验证

### 3. 添加真实案例

- 登录Supabase后台
- 删除示例数据（或禁用）
- 添加真实案例数据
- 上传真实截图

---

## 📖 相关文件

- **SQL脚本**：`supabase-migration-case-studies.sql`
- **组件代码**：`components/Testimonials.js`
- **样式文件**：`styles/globals.css` (第2836行开始)
- **截图工具**：`图片生成-完整版.html`
- **使用指南**：本文档

---

## ❓ 常见问题

### Q1: 截图不显示怎么办？

**A**：检查以下几点
1. 图片路径是否正确
2. 图片文件是否已上传
3. 检查浏览器控制台错误
4. 确认 `is_active` 为 `true`

### Q2: 案例不轮播怎么办？

**A**：
1. 确认至少有2条启用的案例
2. 检查浏览器控制台报错
3. 清除浏览器缓存重试

### Q3: 如何隐藏案例展示板块？

**A**：将所有案例的 `is_active` 改为 `false`，板块会自动隐藏

### Q4: 一个案例可以添加多少张图片？

**A**：
- **理论上无限制**，但建议3-5张为宜
- 图片过多会影响加载速度
- 每张图片都会自动轮播（4秒切换一次）
- 用户可以通过内层箭头手动切换图片

### Q5: 图片轮播逻辑是什么？

**A**：采用**双层轮播**机制
- **外层轮播**：8秒自动切换到下一个案例
- **内层轮播**：4秒自动切换当前案例的下一张截图
- 切换案例时，图片索引会自动重置为第1张
- 单张图片的案例不显示内层箭头和指示点

### Q6: 如何修改已有案例的图片？

**A**：在Supabase Table Editor中
1. 找到案例行，点击 `screenshots` 单元格
2. 直接编辑JSON数组：
   - 添加图片：在数组末尾添加 `{"url": "...", "alt": "..."}`
   - 删除图片：移除对应的对象
   - 修改图片：直接改URL或alt文本
3. 确保JSON格式正确（逗号、引号、括号）
4. 保存后刷新网站查看效果

### Q7: 图片格式有什么要求？

**A**：
- 推荐格式：PNG（支持透明）
- 推荐尺寸：375x667（iPhone标准尺寸）
- 文件大小：建议每张不超过500KB
- 图片比例：建议保持手机竖屏比例（9:16）

### Q4: 可以上传视频吗？

**A**：当前版本仅支持图片，视频需要另外开发

---

**文档维护**：每次功能更新后需更新本文档
**最后更新人**：Claude Code
**更新日期**：2025-11-07
